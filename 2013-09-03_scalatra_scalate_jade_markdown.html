<!DOCTYPE html>
<html lang="en">
<head>
                <title>Strangely Specific and Very Odd</title>
        <meta charset="utf-8" />
                                                                        </head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="blog.gastove.com">Strangely Specific and Very Odd <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
                                          </ul></nav><!-- /#menu -->
        <section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="blog.gastove.com/2013-09-03_scalatra_scalate_jade_markdown.html" rel="bookmark"
         title="Permalink to Scalatra, Scalate, Jade, and Markdown: Together at Last">Scalatra, Scalate, Jade, and Markdown: Together at Last</a></h2>
  
  </header>
  <footer class="post-info">
    <abbr class="published" title="2013-09-03T00:00:00">
      Tue, Sep 03 2013
    </abbr>
        <address class="vcard author">
      By <a class="url fn" href="blog.gastove.com/author/ross-m-donaldson.html">Ross M. Donaldson</a>
    </address>
      </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>So I'm awfully fond of Scala, so when I got going building web apps, <a href="www.scalatra.org">Scalatra</a> seemed like an excellent choice. (I'm natively wary of things like Rails, and the Play! framework seemed more-or-less of Rails' ilk.) Scalatra supports templating via <a href="http://scalate.fusesource.org">Scalate</a>, which is as charming as it is flexible -- that is, very. As part of that flexibility, Scalate supports more templating languages than I really need. I like the terse, Haml-based <a href="http://jade-lang.com/">Jade</a> myself -- particularly because it supports <a href="http://daringfireball.net/projects/markdown/syntax">markdown</a>, meaning your templates can be lovely, dry things.</p>
<p>For instance:</p>
<div class="highlight"><pre><span class="nc">.foo</span>
  <span class="nd">:markdown</span>
    <span class="nd">This will make a paragraph inside a &#39;foo&#39; element from your CSS, close it correctly, and finish with a properly tagged [hyperlink](www.foo.bar).</span>
</pre></div>


<p>Lovely! Only one problem: it was broken out of the box. Any inclusion of the <code>:markdown</code> filter caused the compiler to throw a <code>java.lang.NoSuchMethodError</code> exception. Fan. Tastic.</p>
<p>So I started hacking, and tried a bunch of things that failed -- including, ironically, the correct answer implemented slightly incorrectly. I owe my eventual success to <a href="http://stackoverflow.com/questions/18345085/java-lang-nosuchmethoderror-in-scalatra-using-scalate-with-markdown">Stack Overflow</a>. What I suspected turned out to be correct, and goes a little like this:</p>
<p>Scalatra comes pre-packed with its own version of Scalate; Scalate comes pre-packaged with its own version of Jade. The problem is, neither Scalatra nor Scalate ever mention that what isn't baked in <em>anywhere</em> is Scalate's markdown support, which lives in <a href="http://maven.apache.com">Maven</a>. I got an inkling of this, and tried:</p>
<div class="highlight"><pre><span class="c1">// build.sbt -- wrong!</span>
<span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;org.fusesource.scalamd&quot;</span> <span class="o">%</span> <span class="s">&quot;scalamd&quot;</span> <span class="o">%</span> <span class="s">&quot;1.5&quot;</span>
</pre></div>


<p>There are two errors here; the most problematic is the number 5. <code>scalamd 1.5</code> is built against Scala 2.8. For my own version, Scala 2.10.0, you need version 1.6, plus an extra % for correct lookup formatting, so:</p>
<div class="highlight"><pre><span class="c1">// build.sbt -- right!</span>
<span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">&quot;org.fusesource.scalamd&quot;</span> <span class="o">%%</span> <span class="s">&quot;scalamd&quot;</span> <span class="o">%</span> <span class="s">&quot;1.6&quot;</span>
</pre></div>


<p>BOOM. Works like a charm. And it's an easy fix! I just wish <em>somebody</em>, anybody at either Scalatra or Scalate HQ would mention the damn dependency! (I've poked at them via Twitter, but while both projects are under active development, the Twitter feeds... aren't, alas.)</p>
<p>In any case, I hope this saves people some time. Onwards, to better styled, DRYer, lovelier web apps!</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>